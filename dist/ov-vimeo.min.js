/*! ov-vimeo - v0.0.0 - 2016-10-01 */!function(){"use strict";angular.module("ov.directives").constant("VM_STATUS",{ENDED:0,PLAYING:1,PAUSED:2,SEEKED:3,LOADED:4,CUE_CHANGED:5}).constant("VM_EVENT",{STOP:"vm_stop",PLAY:"vm_play",PAUSE:"vm_pause"}).constant("VM_ERROR",{TYPE_ERROR:0,PASSWORD_ERROR:1,PRIVACY_ERROR:2,UNKNKOWN_ERROR:3}).directive("ovVimeo",["$window","VM_STATUS","VM_EVENT","VM_ERROR",function(a,b,c,d){return{restrict:"E",scope:{videoId:"@",autopause:"@",autoplay:"@",byline:"@",color:"@",height:"@",loop:"@",maxheight:"@",maxwidth:"@",portrait:"@",title:"@",width:"@",videoClass:"@",onStatusChanged:"&",onError:"&"},link:function(a,e){var f={status:"",error:""},g={id:a.videoId,autopause:a.autopause||!0,autoplay:a.autoplay||!1,byline:a.byline||!0,color:a.color,height:a.height,loop:a.loop||!1,maxheight:a.maxheight,maxwidth:a.maxwidth,portrait:a.portrait||!0,title:a.title||!0,width:a.width},h=new Vimeo.Player(e,g),i=function(){f.status=b.PLAYING,a.onStatusChanged(f)},j=function(){f.status=b.PAUSED,a.onStatusChanged(f)},k=function(){f.status=b.ENDED,a.onStatusChanged(f)},l=function(){f.status=b.SEEKED,a.onStatusChanged(f)},m=function(){f.status=b.CUE_CHANGED,a.onStatusChanged(f)},n=function(){f.status=b.LOADED,a.onStatusChanged(f)};e.on("$destroy",function(){h.off("play",i),h.off("pause",j),h.off("ended",k),h.off("seeked",l),h.off("cuechange",m),h.off("loaded",n)}),h.on("play",i),h.on("pause",j),h.on("ended",k),h.on("seeked",l),h.on("cuechange",m),h.on("loaded",n),h.ready().then(function(){var b=document.getElementsByTagName("iframe");a.videoClass&&b&&b.length>0&&angular.element(b[0]).addClass(a.videoClass)}),a.$watch("videoId",function(b,c){b!==c&&h.loadVideo(a.videoId).then(function(){}).catch(function(b){switch(b.name){case"TypeError":f.error=d.TYPE_ERROR,a.onError(f);break;case"PasswordError":f.error=d.PASSWORD_ERROR,a.onError(f);break;case"PrivacyError":f.error=d.PRIVACY_ERROR,a.onError(f);break;default:f.error=d.UNKNKOWN_ERROR,a.onError(f)}})}),a.$on(c.STOP,function(){h.unload().then(function(){}).catch(function(){f.error=d.UNKNKOWN_ERROR,a.onError(f)})}),a.$on(c.PLAY,function(){h.play().then(function(){}).catch(function(b){switch(b.name){case"PasswordError":f.error=d.PASSWORD_ERROR,a.onError(f);break;case"PrivacyError":f.error=d.PRIVACY_ERROR,a.onError(f);break;default:f.error=d.UNKNKOWN_ERROR,a.onError(f)}})}),a.$on(c.PAUSE,function(){h.pause().then(function(){}).catch(function(b){switch(b.name){case"PasswordError":f.error=d.PASSWORD_ERROR,a.onError(f);break;case"PrivacyError":f.error=d.PRIVACY_ERROR,a.onError(f);break;default:f.error=d.UNKNKOWN_ERROR,a.onError(f)}})})}}}])}();